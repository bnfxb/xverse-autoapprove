(()=>{"use strict";var e;!function(e){e.Home="/",e.TransactionRequest="/transaction-request",e.AuthenticationRequest="/authentication-request",e.SignatureRequest="/signature-request",e.AddressRequest="/btc-select-address-request",e.SignBtcTx="/psbt-signing-request"}(e||(e={}));const t=e,s=e=>!(e.source instanceof MessagePort||e.source instanceof ServiceWorker)?e.source:null,n="xverse-wallet";var a,u,r,i;let o;function d({payload:e,method:t}){var s;s={method:t,payload:e,source:n},o.postMessage(s)}!function(e){e.transactionRequest="transactionRequest",e.transactionResponse="transactionResponse",e.authenticationRequest="authenticationRequest",e.authenticationResponse="authenticationResponse",e.signatureRequest="signatureRequest",e.signatureResponse="signatureResponse",e.structuredDataSignatureRequest="structuredDataSignatureRequest",e.structuredDataSignatureResponse="structuredDataSignatureResponse"}(a||(a={})),function(e){e.RequestDerivedStxAccounts="RequestDerivedStxAccounts",e.ShareInMemoryKeyToBackground="ShareInMemoryKeyToBackground",e.RequestInMemoryKeys="RequestInMemoryKeys",e.RemoveInMemoryKeys="RemoveInMemoryKeys",e.OriginatingTabClosed="OriginatingTabClosed"}(u||(u={})),function(e){e.getAddressRequest="getAddressRequest",e.getAddressResponse="getAddressResponse",e.signPsbtRequest="signPsbtRequest",e.signPsbtResponse="signPsbtResponse",e.signMessageRequest="signMessageRequest",e.signMessageResponse="signMessageResponse"}(r||(r={})),function(e){e.authenticationRequest="stacksAuthenticationRequest",e.signatureRequest="signatureRequest",e.structuredDataSignatureRequest="structuredDataSignatureRequest",e.transactionRequest="stacksTransactionRequest",e.getAddressRequest="SatsAddressRequest",e.signPsbtRequest="SatsPsbtRequest",e.signMessageRequest="SatsSignMessage"}(i||(i={})),window.addEventListener("message",(e=>{const{data:t}=e;if("xverse-app"===t.source){const{method:n}=t;if("getURL"===n){const t=chrome.runtime.getURL("options.html"),n=s(e);n?.postMessage({url:t,method:"getURLResponse",source:"xverse-extension"},e.origin)}}})),function e(){o=chrome.runtime.connect({name:"xverse-content-script"}),o.onDisconnect.addListener(e)}(),chrome.runtime.onMessage.addListener((e=>{e.source===n&&window.postMessage(e,window.location.origin)})),document.addEventListener(i.authenticationRequest,(e=>{d({path:t.AuthenticationRequest,payload:e.detail.authenticationRequest,urlParam:"authRequest",method:a.authenticationRequest})})),document.addEventListener(i.transactionRequest,(e=>{d({path:t.TransactionRequest,payload:e.detail.transactionRequest,urlParam:"request",method:a.transactionRequest})})),document.addEventListener(i.signatureRequest,(e=>{d({path:t.SignatureRequest,payload:e.detail.signatureRequest,urlParam:"request",method:a.signatureRequest})})),document.addEventListener(i.structuredDataSignatureRequest,(e=>{d({path:t.SignatureRequest,payload:e.detail.signatureRequest,urlParam:"request",method:a.structuredDataSignatureRequest})})),document.addEventListener(i.getAddressRequest,(e=>{d({path:t.AddressRequest,payload:e.detail.btcAddressRequest,urlParam:"addressRequest",method:r.getAddressRequest})})),document.addEventListener(i.signPsbtRequest,(e=>{d({path:t.SignBtcTx,payload:e.detail.signPsbtRequest,urlParam:"signPsbtRequest",method:r.signPsbtRequest})})),document.addEventListener(i.signMessageRequest,(e=>{d({path:t.SignatureRequest,payload:e.detail.signMessageRequest,urlParam:"signMessageRequest",method:r.signMessageRequest})}));const c=document.createElement("script");c.src=chrome.runtime.getURL("inpage.js"),c.id="xverse-wallet-provider",document.body.appendChild(c)})();